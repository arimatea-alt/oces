-- Auto Open Box Script - CENTER SCREEN (TENGGAH LAYAR)
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Configuration (ADDED Smart's Gearbox)
local BOXES = {
    {name = "Progrise Cache", enabled = true},
    {name = "War's Box", enabled = true},
    {name = "Essence's Gearbox", enabled = true},
    {name = "Mirror's Gearbox", enabled = true},
    {name = "Mirror's Card", enabled = true},
    {name = "Smart's Gearbox", enabled = true}  -- âœ… NEW BOX ADDED
}

local masterToggle = false
local connection
local remotePath
local lastOpenTime = 0
local DELAY = 0.3

-- Wait for remote safely
pcall(function()
    remotePath = ReplicatedStorage:WaitForChild("Remote"):WaitForChild("Function"):WaitForChild("InventoryFunction")
end)

-- Functions
local function openBox(boxName)
    if not remotePath then return end
    local now = tick()
    if now - lastOpenTime < DELAY then return end
    pcall(function() 
        remotePath:InvokeServer(boxName)
        lastOpenTime = now
        print("âœ… Opened:", boxName)
    end)
end

local function openEnabledBoxes()
    for _, box in pairs(BOXES) do
        if box.enabled then 
            openBox(box.name)
            task.wait(0.1)
        end
    end
end

local function startAutoOpen()
    if connection then connection:Disconnect() end
    local counter = 0
    connection = RunService.Heartbeat:Connect(function()
        counter = counter + 1
        if masterToggle and counter % 10 == 0 then
            spawn(openEnabledBoxes)
        end
    end)
end

local function stopAutoOpen()
    masterToggle = false
    if connection then connection:Disconnect() connection = nil end
end

local function getEnabledCount()
    local count = 0
    for _, box in pairs(BOXES) do if box.enabled then count = count + 1 end end
    return count
end

-- GUI Creation (CENTER SCREEN POSITION)
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AutoBoxGUI"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 280, 0, 350)
mainFrame.Position = UDim2.new(0.5, -140, 0.5, -175)  -- âœ… CENTER SCREEN!
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Parent = screenGui

local mainCorner = Instance.new("UICorner")
mainCorner.CornerRadius = UDim.new(0, 12)
mainCorner.Parent = mainFrame

-- Header
local header = Instance.new("Frame")
header.Size = UDim2.new(1, 0, 0, 50)
header.Position = UDim2.new(0, 0, 0, 0)
header.BackgroundColor3 = Color3.fromRGB(50, 50, 70)
header.Parent = mainFrame

local headerCorner = Instance.new("UICorner")
headerCorner.CornerRadius = UDim.new(0, 12)
headerCorner.Parent = header

local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -80, 1, 0)
title.Position = UDim2.new(0, 15, 0, 0)
title.BackgroundTransparency = 1
title.Text = "AUTO BOX OPENER"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = header

local minimizeBtn = Instance.new("TextButton")
minimizeBtn.Size = UDim2.new(0, 35, 0, 35)
minimizeBtn.Position = UDim2.new(1, -45, 0, 7.5)
minimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
minimizeBtn.Text = "-"
minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
minimizeBtn.TextScaled = true
minimizeBtn.Font = Enum.Font.GothamBold
minimizeBtn.Parent = header

local minCorner = Instance.new("UICorner")
minCorner.CornerRadius = UDim.new(0, 8)
minCorner.Parent = minimizeBtn

-- Content
local content = Instance.new("Frame")
content.Size = UDim2.new(1, -20, 1, -70)
content.Position = UDim2.new(0, 10, 0, 60)
content.BackgroundTransparency = 1
content.Parent = mainFrame

-- Master Toggle
local masterBtn = Instance.new("TextButton")
masterBtn.Size = UDim2.new(1, 0, 0, 45)
masterBtn.Position = UDim2.new(0, 0, 0, 0)
masterBtn.BackgroundColor3 = Color3.fromRGB(70, 70, 90)
masterBtn.Text = "MASTER: OFF"
masterBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
masterBtn.TextScaled = true
masterBtn.Font = Enum.Font.GothamBold
masterBtn.Parent = content

local masterCorner = Instance.new("UICorner")
masterCorner.CornerRadius = UDim.new(0, 10)
masterCorner.Parent = masterBtn

-- ScrollFrame
local scrollFrame = Instance.new("ScrollingFrame")
scrollFrame.Size = UDim2.new(1, 0, 1, -60)
scrollFrame.Position = UDim2.new(0, 0, 0, 55)
scrollFrame.BackgroundTransparency = 1
scrollFrame.BorderSizePixel = 0
scrollFrame.ScrollBarThickness = 4
scrollFrame.ScrollBarImageColor3 = Color3.fromRGB(100, 150, 255)
scrollFrame.Parent = content

local listLayout = Instance.new("UIListLayout")
listLayout.SortOrder = Enum.SortOrder.LayoutOrder
listLayout.Padding = UDim.new(0, 6)
listLayout.Parent = scrollFrame

-- Status (UPDATED TO 6/6)
local statusLabel = Instance.new("TextLabel")
statusLabel.Size = UDim2.new(1, 0, 0, 25)
statusLabel.Position = UDim2.new(0, 0, 1, -25)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "0/6 Active"
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.TextScaled = true
statusLabel.Font = Enum.Font.GothamSemibold
statusLabel.Parent = content

-- Box Toggles (UPDATED ICONS + Smart's Gearbox)
local icons = {"ðŸŽ", "âš”ï¸", "âš™ï¸", "ðŸ”®", "ðŸƒ", "ðŸ§ "}  -- âœ… ADDED BRAIN ICON FOR SMART'S
for i, box in pairs(BOXES) do
    local boxFrame = Instance.new("Frame")
    boxFrame.Size = UDim2.new(1, 0, 0, 42)
    boxFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 65)
    boxFrame.Parent = scrollFrame
    
    local boxCorner = Instance.new("UICorner")
    boxCorner.CornerRadius = UDim.new(0, 8)
    boxCorner.Parent = boxFrame
    
    local icon = Instance.new("TextLabel")
    icon.Size = UDim2.new(0, 35, 1, 0)
    icon.Position = UDim2.new(0, 10, 0, 0)
    icon.BackgroundTransparency = 1
    icon.Text = icons[i]
    icon.TextColor3 = Color3.fromRGB(100, 200, 255)
    icon.TextScaled = true
    icon.Font = Enum.Font.GothamBold
    icon.Parent = boxFrame
    
    local nameLabel = Instance.new("TextLabel")
    nameLabel.Size = UDim2.new(0.6, 0, 1, 0)
    nameLabel.Position = UDim2.new(0, 50, 0, 0)
    nameLabel.BackgroundTransparency = 1
    nameLabel.Text = box.name
    nameLabel.TextColor3 = Color3.fromRGB(220, 220, 230)
    nameLabel.TextScaled = true
    nameLabel.Font = Enum.Font.Gotham
    nameLabel.TextXAlignment = Enum.TextXAlignment.Left
    nameLabel.Parent = boxFrame
    
    local toggleBtn = Instance.new("TextButton")
    toggleBtn.Size = UDim2.new(0, 55, 0, 30)
    toggleBtn.Position = UDim2.new(1, -65, 0.5, -15)
    toggleBtn.BackgroundColor3 = box.enabled and Color3.fromRGB(0, 200, 80) or Color3.fromRGB(200, 50, 50)
    toggleBtn.Text = box.enabled and "ON" or "OFF"
    toggleBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    toggleBtn.TextScaled = true
    toggleBtn.Font = Enum.Font.GothamBold
    toggleBtn.Parent = boxFrame
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(0, 8)
    toggleCorner.Parent = toggleBtn
    
    toggleBtn.MouseButton1Click:Connect(function()
        box.enabled = not box.enabled
        toggleBtn.Text = box.enabled and "ON" or "OFF"
        toggleBtn.BackgroundColor3 = box.enabled and Color3.fromRGB(0, 200, 80) or Color3.fromRGB(200, 50, 50)
        local count = getEnabledCount()
        statusLabel.Text = count .. "/6 Active"  -- âœ… UPDATED TO 6
        statusLabel.TextColor3 = count > 0 and Color3.fromRGB(0, 255, 100) or Color3.fromRGB(200, 200, 200)
    end)
end

-- Auto canvas
listLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
    scrollFrame.CanvasSize = UDim2.new(0, 0, 0, listLayout.AbsoluteContentSize.Y + 10)
end)

-- Update status awal (UPDATED TO 6/6)
local count = getEnabledCount()
statusLabel.Text = count .. "/6 Active"
statusLabel.TextColor3 = count > 0 and Color3.fromRGB(0, 255, 100) or Color3.fromRGB(200, 200, 200)

-- Master Toggle (UPDATED STATUS DISPLAY)
masterBtn.MouseButton1Click:Connect(function()
    masterToggle = not masterToggle
    local enabledCount = getEnabledCount()
    if masterToggle then
        masterBtn.Text = "MASTER: ON"
        masterBtn.BackgroundColor3 = Color3.fromRGB(0, 200, 80)
        statusLabel.Text = "Opening " .. enabledCount .. "/6"  -- âœ… UPDATED TO 6
        startAutoOpen()
    else
        masterBtn.Text = "MASTER: OFF"
        masterBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
        statusLabel.Text = enabledCount .. "/6 Active"  -- âœ… UPDATED TO 6
        stopAutoOpen()
    end
end)

-- Minimize
local isMinimized = false
minimizeBtn.MouseButton1Click:Connect(function()
    isMinimized = not isMinimized
    if isMinimized then
        masterBtn.Visible = false
        scrollFrame.Visible = false
        statusLabel.Visible = false
        TweenService:Create(mainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 280, 0, 60)}):Play()
        minimizeBtn.Text = "+"
        minimizeBtn.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
    else
        masterBtn.Visible = true
        scrollFrame.Visible = true
        statusLabel.Visible = true
        TweenService:Create(mainFrame, TweenInfo.new(0.3), {Size = UDim2.new(0, 280, 0, 350)}):Play()
        minimizeBtn.Text = "-"
        minimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
    end
end)

-- Drag
local dragging = false
local dragStart = nil
local startPos = nil

header.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = mainFrame.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        mainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

print("âœ… CENTER SCREEN GUI LOADED! 6 boxes ready! (Smart's Gearbox ADDED ðŸ§ )")
